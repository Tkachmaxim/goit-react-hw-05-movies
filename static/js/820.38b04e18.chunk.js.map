{"version":3,"file":"static/js/820.38b04e18.chunk.js","mappings":"uMAGMA,EAAW,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAClB,GAA6BC,EAAAA,EAAAA,MACvBC,EADN,EAAQC,SAAR,EAAkBC,OAGlB,OAAOJ,EAAKK,KAAI,gBAAGC,EAAH,EAAGA,cAAeC,EAAlB,EAAkBA,eAAgBC,EAAlC,EAAkCA,GAAlC,OACd,yBACE,UAAC,EAAAC,KAAD,CAAMC,GAAE,kBAAaF,GAAMG,MAAO,CAAEC,KAAM,CAAEV,SAAAA,IAA5C,UACGI,GAAiBC,EAAgB,QAF7BC,Q,uLCRPK,EAAU,mCAAhB,SAEeC,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,WAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,2GAA8BC,EAA9B,+BAAoC,GAAIC,EAAxC,+BAAiD,GAAjD,SACyBC,MAAMF,EAAKC,GADpC,YACQE,EADR,QAEkBC,GAFlB,iCAGYD,EAASE,OAHrB,gDAIMC,QAAQC,OAAO,IAAIC,MAAM,iBAJ/B,2GAOA,IAAMC,EAAgB,WAEpB,OAuBF,WAMeC,EAAAA,MAAAA,KAAAA,WA9BbA,GACOX,EAAe,yDAAD,OACsCD,KAIvDa,EAAgB,SAAAC,GACpB,OAAOb,EAAe,sCAAD,OACmBa,EADnB,oBACuCd,EADvC,qBAKjBe,EAAgB,SAAAD,GACpB,OAAOb,EAAe,sCAAD,OACmBa,EADnB,4BAC+Cd,KAIhEgB,EAAiB,SAAAC,GACrB,OAAOhB,EAAe,qDAAD,OACkCD,EADlC,kBACmDiB,KAIpEC,EAAe,SAAAC,GACnB,OAAOlB,EAAe,sCAAD,OACmBkB,EADnB,4BAC8CnB,KAItDY,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,wFACMQ,aAAaC,QAAQ,UAD3B,iEAKuBpB,EAAe,yDAAD,OACwBD,IAN7D,OAKQsB,EALR,OAQEF,aAAaG,QAAQ,SAAUC,KAAKC,UAAUH,IARhD,oE,mGCwBA,UA1De,WACb,OAAwBI,EAAAA,EAAAA,UAAS,IAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAAsCF,EAAAA,EAAAA,UAAS,MAA/C,eAAOG,EAAP,KAAoBC,EAApB,KACQvC,GAAWH,EAAAA,EAAAA,MAAXG,QAERwC,EAAAA,EAAAA,YAAU,WACJxC,GACFqC,EAAQrC,EAAOyC,MAAM,MAEtB,CAACzC,IAEJ,IAKA,GAAwC0C,EAAAA,EAAAA,mBAAxC,eAAOC,EAAP,KAAqBC,EAArB,MAEAJ,EAAAA,EAAAA,YAAU,WACR,GAAKxC,EAAL,CAGA,IAAM6C,EAAmBF,EAAaG,IAAI,UAC1CrB,EAAAA,EAAAA,IAAeoB,GAAkBE,KAAKR,MACrC,CAACvC,EAAQ2C,IAYZ,OACE,4BACE,kBAAMK,SAZc,SAAAC,GACtBA,EAAEC,iBACF,IAAMC,EAAwBf,EAAKgB,cAAcC,OAC5CF,KAGL1B,EAAAA,EAAAA,IAAe0B,GAAuBJ,KAAKR,GAC3CK,EAAgB,SAAD,OAAUO,MAKvB,WACE,gDAEE,kBACEG,SA/BW,SAAAL,GACnB,IAAQM,EAAUN,EAAEO,OAAZD,MACRlB,EAAQkB,IA8BAE,KAAK,OACLC,KAAK,OACLH,MAAOnB,EACPuB,UAAQ,QAIZ,mBAAQF,KAAK,SAAb,uBAGDnB,IAAe,SAAC,IAAD,CAAU1C,KAAM0C,EAAYsB","sources":["components/FilmList/FilmList.js","helpers/API.js","pages/Movies/Movies.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst FilmList = ({ data }) => {\n  const { pathname, search } = useLocation();\n  const location = pathname + search;\n\n  return data.map(({ original_name, original_title, id }) => (\n    <li key={id}>\n      <Link to={`/movies/${id}`} state={{ from: { location } }}>\n        {original_name || original_title}{' '}\n      </Link>\n    </li>\n  ));\n};\n\nexport { FilmList };\n\nFilmList.propTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      original_name: PropTypes.string,\n      original_title: PropTypes.string.isRequired,\n      id: PropTypes.number.isRequired,\n    })\n  ),\n};\n","const API_KEY = '985bc3c757188a382d12315376e2d5f0';\n\nasync function fetchWithError(url = '', config = {}) {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(new Error('Some occured'));\n}\n\nconst fetchTrending = () => {\n  getGenres();\n  return fetchWithError(\n    `https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`\n  );\n};\n\nconst fetchFilmInfo = movie_id => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`\n  );\n};\n\nconst fetchFilmCast = movie_id => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movie_id}/credits?api_key=${API_KEY}`\n  );\n};\n\nconst fetchFilmQuery = query => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}`\n  );\n};\n\nconst fetchReviews = movieId => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movieId}/reviews?api_key=${API_KEY}`\n  );\n};\n\nasync function getGenres() {\n  if (localStorage.getItem('genres')) {\n    return;\n  }\n\n  const genres = await fetchWithError(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  localStorage.setItem('genres', JSON.stringify(genres));\n}\n\nexport {\n  fetchTrending,\n  fetchFilmInfo,\n  fetchFilmCast,\n  fetchReviews,\n  fetchFilmQuery,\n};\n","import { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useLocation, useSearchParams } from 'react-router-dom';\nimport { fetchFilmQuery } from 'helpers/API';\nimport { FilmList } from 'components/FilmList/FilmList';\n\nconst Movies = () => {\n  const [film, setFilm] = useState('');\n  const [queryResult, setQueryResult] = useState(null);\n  const { search } = useLocation();\n\n  useEffect(() => {\n    if (search) {\n      setFilm(search.slice(7));\n    }\n  }, [search]);\n\n  const onChangeForm = e => {\n    const { value } = e.target;\n    setFilm(value);\n  };\n\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  useEffect(() => {\n    if (!search) {\n      return;\n    }\n    const normilizedSearch = searchParams.get('query');\n    fetchFilmQuery(normilizedSearch).then(setQueryResult);\n  }, [search, searchParams]);\n\n  const onSubmitHandler = e => {\n    e.preventDefault();\n    const normilizedSearchQuery = film.toLowerCase().trim();\n    if (!normilizedSearchQuery) {\n      return;\n    }\n    fetchFilmQuery(normilizedSearchQuery).then(setQueryResult);\n    setSearchParams(`query=${normilizedSearchQuery}`);\n  };\n\n  return (\n    <div>\n      <form onSubmit={onSubmitHandler}>\n        <label>\n          Input film name\n          <input\n            onChange={onChangeForm}\n            type=\"text\"\n            name=\"film\"\n            value={film}\n            required\n          />\n        </label>\n\n        <button type=\"submit\">Search</button>\n      </form>\n\n      {queryResult && <FilmList data={queryResult.results} />}\n    </div>\n  );\n};\n\nexport default Movies;\n"],"names":["FilmList","data","useLocation","location","pathname","search","map","original_name","original_title","id","Link","to","state","from","API_KEY","fetchWithError","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrending","getGenres","fetchFilmInfo","movie_id","fetchFilmCast","fetchFilmQuery","query","fetchReviews","movieId","localStorage","getItem","genres","setItem","JSON","stringify","useState","film","setFilm","queryResult","setQueryResult","useEffect","slice","useSearchParams","searchParams","setSearchParams","normilizedSearch","get","then","onSubmit","e","preventDefault","normilizedSearchQuery","toLowerCase","trim","onChange","value","target","type","name","required","results"],"sourceRoot":""}