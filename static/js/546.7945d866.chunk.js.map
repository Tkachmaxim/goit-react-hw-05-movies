{"version":3,"file":"static/js/546.7945d866.chunk.js","mappings":"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","sources":["helpers/API.js","webpack://react-homework-template/./src/components/GoBackButton/GoBackButton.module.css?1091","components/GoBackButton/GoBackButton.js","webpack://react-homework-template/./src/components/FilmCard/FilmCard.module.css?23a1","components/FilmCard/FilmCard.js","components/ErrorComponent/ErrorComponent.js","webpack://react-homework-template/./src/pages/FilmInfo/FilmInfo.module.css?5e06","pages/FilmInfo/FilmInfo.js"],"sourcesContent":["const API_KEY = '985bc3c757188a382d12315376e2d5f0';\n\nasync function fetchWithError(url = '', config = {}) {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(new Error('Some occured'));\n}\n\nconst fetchTrending = () => {\n  getGenres();\n  return fetchWithError(\n    `https://api.themoviedb.org/3/trending/all/day?api_key=${API_KEY}`\n  );\n};\n\nconst fetchFilmInfo = movie_id => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movie_id}?api_key=${API_KEY}&language=en-US`\n  );\n};\n\nconst fetchFilmCast = movie_id => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movie_id}/credits?api_key=${API_KEY}`\n  );\n};\n\nconst fetchFilmQuery = query => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}`\n  );\n};\n\nconst fetchReviews = movieId => {\n  return fetchWithError(\n    `https://api.themoviedb.org/3/movie/${movieId}/reviews?api_key=${API_KEY}`\n  );\n};\n\nasync function getGenres() {\n  if (localStorage.getItem('genres')) {\n    return;\n  }\n\n  const genres = await fetchWithError(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  localStorage.setItem('genres', JSON.stringify(genres));\n}\n\nexport {\n  fetchTrending,\n  fetchFilmInfo,\n  fetchFilmCast,\n  fetchReviews,\n  fetchFilmQuery,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GoBackButton_button__cr-V5\"};","import s from './GoBackButton.module.css';\n\nconst GoBackButton = () => {\n  return (\n    <button type=\"button\" className={s.button}>\n      GoBack\n    </button>\n  );\n};\n\nexport { GoBackButton };\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"FilmCard_card__tvIdy\",\"text\":\"FilmCard_text__hSAz5\"};","import PropTypes from 'prop-types';\nimport s from '../FilmCard/FilmCard.module.css';\n\nconst FilmCard = ({ filmInfo }) => {\n  const genresNames = filmInfo.genres.map(({ name }) => name).join(' ');\n\n  return (\n    <div className={s.card}>\n      <div className={s.image}>\n        <img\n          src={`https://image.tmdb.org/t/p/w500${filmInfo.poster_path}`}\n          alt={filmInfo.original_title}\n        />\n      </div>\n\n      <div className={s.text}>\n        <h1>{filmInfo.original_title}</h1>\n        <p>User score: {filmInfo.popularity}%</p>\n        <h1>Overwiew</h1>\n        <p>{filmInfo.overview}</p>\n        <h1>Genres</h1>\n        <p>{genresNames}</p>\n      </div>\n    </div>\n  );\n};\n\nexport { FilmCard };\n\nFilmCard.propTypes = {\n  filmInfo: PropTypes.shape({\n    genres: PropTypes.array,\n    original_title: PropTypes.string,\n    poster_path: PropTypes.string,\n    popularity: PropTypes.number,\n    overview: PropTypes.string,\n  }),\n};\n","const ErrorComponent = () => {\n  return <h1>Some thing happened, try again or change request</h1>;\n};\n\nexport { ErrorComponent };\n","// extracted by mini-css-extract-plugin\nexport default {\"movieInfo\":\"FilmInfo_movieInfo__p7YWk\"};","import {\n  useParams,\n  NavLink,\n  Route,\n  Routes,\n  useLocation,\n} from 'react-router-dom';\nimport { fetchFilmInfo } from 'helpers/API';\nimport { Suspense, useEffect, useState, lazy } from 'react';\nimport { GoBackButton } from 'components/GoBackButton/GoBackButton';\nimport { FilmCard } from 'components/FilmCard/FilmCard';\nimport { ErrorComponent } from '../../components/ErrorComponent/ErrorComponent';\nimport s from './FilmInfo.module.css';\n\nconst Cast = lazy(() => import('../Cast/Cast'));\nconst Reviews = lazy(() => import('../Reviews/Reviews'));\n\nconst FilmInfo = () => {\n  const { filmId } = useParams();\n  const [filmInfo, setFilmInfo] = useState(null);\n  const [path, setPath] = useState('/');\n  const [error, setError] = useState(null);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    const pathName = location.state ? location.state.from.location : '/';\n\n    setPath(pathName);\n  }, [location.state]);\n\n  console.log(path);\n  console.log(location);\n\n  useEffect(() => {\n    fetchFilmInfo(filmId)\n      .then(data => setFilmInfo(data))\n      .catch(error => setError(error));\n  }, [filmId]);\n\n  return (\n    <>\n      <NavLink to={path}>\n        <GoBackButton />\n      </NavLink>\n      {filmInfo && (\n        <div className={s.movieInfo}>\n          <FilmCard filmInfo={filmInfo} />\n          <hr />\n          <div className=\"additional\">\n            <h1>Additional information</h1>\n            <ul>\n              <li>\n                <NavLink to=\"cast\">Cast</NavLink>\n              </li>\n              <li>\n                <NavLink to=\"reviews\">Rewiews</NavLink>\n              </li>\n            </ul>\n          </div>\n          <Suspense>\n            <Routes>\n              <Route path=\"cast\" element={<Cast />} />\n              <Route path=\"reviews\" element={<Reviews />} />\n            </Routes>\n          </Suspense>\n        </div>\n      )}\n      {!!error && <ErrorComponent />}\n    </>\n  );\n};\n\nexport default FilmInfo;\n"],"names":["API_KEY","fetchWithError","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrending","getGenres","fetchFilmInfo","movie_id","fetchFilmCast","fetchFilmQuery","query","fetchReviews","movieId","localStorage","getItem","genres","setItem","JSON","stringify","GoBackButton","type","className","s","FilmCard","filmInfo","genresNames","map","name","join","src","poster_path","alt","original_title","popularity","overview","ErrorComponent","Cast","lazy","Reviews","filmId","useParams","useState","setFilmInfo","path","setPath","error","setError","location","useLocation","useEffect","pathName","state","from","console","log","then","data","catch","NavLink","to","Suspense","element"],"sourceRoot":""}